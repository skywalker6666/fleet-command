# FridgeManagerï¼ˆå†°ç®±ç®¡ç†ï¼‰â€” å°ˆæ¡ˆè¦æ ¼æ›¸
### Version 1.0 | 2026-02-25

---

## 1. å°ˆæ¡ˆæ¦‚è¿°

**ä¸€å¥è©±å®šä½ï¼š** å®¶åº­é£Ÿæç®¡ç† + åˆ°æœŸæé†’ + AI é£Ÿè­œæ¨è–¦ï¼Œæ¸›å°‘é£Ÿç‰©æµªè²»ã€é™ä½æ¡è³¼æˆæœ¬

### 1.1 å•é¡Œ

å°ç£å®¶åº­æ¯å¹´æµªè²»å¤§é‡é£Ÿæï¼Œç—›é»é›†ä¸­åœ¨ï¼š
- **å¿˜è¨˜å†°ç®±æœ‰ä»€éº¼**ï¼šè²·é‡è¤‡çš„é£Ÿæã€å¿˜äº†å¿«éæœŸçš„æ±è¥¿
- **ä¸çŸ¥é“èƒ½ç…®ä»€éº¼**ï¼šæœ‰é£Ÿæä½†ç¼ºéˆæ„Ÿï¼Œæœ€å¾Œå«å¤–é€
- **åˆ°æœŸæ‰ç™¼ç¾**ï¼šè”¬èœæ”¾åˆ°çˆ›ã€è‚‰éæœŸæ‰èåˆ°ï¼Œæµªè²»é‡‘éŒ¢
- **æ¡è³¼æ²’è¨ˆåŠƒ**ï¼šè¡å‹•è³¼è²·ï¼Œå›å®¶æ‰ç™¼ç¾è·Ÿå†°ç®±è£¡çš„é‡è¤‡

### 1.2 è§£æ³•

ä¸€å€‹ PWA æ‡‰ç”¨ï¼Œæ ¸å¿ƒåŠŸèƒ½ä¸‰ä»¶äº‹ï¼š
- **é£Ÿææ¸…å–®ç®¡ç†**ï¼šæƒæ¢ç¢¼æˆ–æ‰‹å‹•è¼¸å…¥ï¼Œè¨˜éŒ„é£Ÿæã€æ•¸é‡ã€åˆ°æœŸæ—¥
- **åˆ°æœŸæé†’**ï¼šæå‰ 1-3 å¤©æ¨æ’­é€šçŸ¥ï¼Œå„ªå…ˆè™•ç†å¿«éæœŸé£Ÿæ
- **AI é£Ÿè­œæ¨è–¦**ï¼šæ ¹æ“šã€Œç¾æœ‰é£Ÿæ + å¿«éæœŸé£Ÿæã€æ¨è–¦å¯ä»¥åšçš„æ–™ç†

### 1.3 æ ¸å¿ƒè¨­è¨ˆåŸå‰‡

- **æœ€å°‘æ“ä½œ**ï¼šæƒæ¢ç¢¼ > æ‹ç…§è¾¨è­˜ > æ‰‹å‹•è¼¸å…¥ï¼Œä¸‰ç¨®è¼¸å…¥æ–¹å¼ç”±å¿«åˆ°æ…¢
- **åˆ°æœŸé©…å‹•**ï¼šæ‰€æœ‰ UI ä»¥ã€Œå¹¾å¤©åˆ°æœŸã€æ’åºï¼Œç´…é»ƒç¶ ä¸‰è‰²ç›´è¦ºæç¤º
- **é›¶æµªè²»å°å‘**ï¼šé£Ÿè­œæ¨è–¦å„ªå…ˆä½¿ç”¨å¿«éæœŸé£Ÿæï¼Œæ¸›å°‘ä¸Ÿæ£„é‡
- **å®¶åº­å…±äº«**ï¼šåŒä¸€å†°ç®±å¤šäººå¯å­˜å–ï¼Œåª½åª½è¨˜éŒ„ã€çˆ¸çˆ¸æŸ¥çœ‹

### 1.4 ç›®æ¨™ç”¨æˆ¶

| ç”¨æˆ¶é¡å‹ | Profile | å ´æ™¯ |
|---------|---------|------|
| ä¸»è¦ | è² è²¬ç…®é£¯çš„å®¶åº­æˆå“¡ï¼ˆ30-50 æ­²ï¼‰ | æ—¥å¸¸é£Ÿæç®¡ç†å’Œçƒ¹é£ªæ±ºç­– |
| æ¬¡è¦ | å¤–é£Ÿç‚ºä¸»ä½†å¶çˆ¾é–‹ä¼™ | æ¸›å°‘é£Ÿææµªè²» |
| å»¶ä¼¸ | å°å®¶åº­/ç¨å±… | ç²¾æº–è³¼è²·ã€ä¸å›¤éå¤š |

---

## 2. å•†æ¥­æ¨¡å¼

### 2.1 æ”¶å…¥ç·š

**Freemium Appï¼ˆB2Cï¼‰ï¼š**
- Freeï¼šæœ€å¤šè¿½è¹¤ 30 é …é£Ÿæã€åŸºç¤åˆ°æœŸæé†’ã€æ¯æ—¥ 3 æ¬¡é£Ÿè­œæ¨è–¦
- Pro $3.99/moï¼šç„¡é™é£Ÿæè¿½è¹¤ã€AI é£Ÿè­œç„¡é™æ¨è–¦ã€ç‡Ÿé¤Šåˆ†æã€æ¡è³¼æ¸…å–®è‡ªå‹•ç”Ÿæˆã€å®¶åº­å…±äº«ï¼ˆæœ€å¤š 4 äººï¼‰

**è¯ç›Ÿè¡ŒéŠ·ï¼ˆB2Bï¼ŒPhase 3ï¼‰ï¼š**
- æ¨è–¦é£Ÿè­œç¼ºå°‘çš„é£Ÿæ â†’ å°æµåˆ°é‡è²©åº—/é›»å•†
- èˆ‡ CardSense æ•´åˆ â†’ æ¨è–¦è¶…å¸‚æœ€é«˜å›é¥‹çš„ä¿¡ç”¨å¡

### 2.2 Phase 2 ç›®æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ |
|------|------|
| é€±æ´»èºç”¨æˆ¶ | 300 |
| Pro è¨‚é–±è€… | 30 (10% conversion) |
| å¹³å‡æ¯ç”¨æˆ¶è¿½è¹¤é£Ÿææ•¸ | 15 |
| MRR | $120 |

### 2.3 MVP æˆæœ¬

< $10/moï¼ˆLLM via premium subscriptions + Supabase free tier + Vercel hobbyï¼‰

### 2.4 é‡Œç¨‹ç¢‘

```
Phase 0 âœ… æ¦‚å¿µå®šç¾©ã€è·¨å°ˆæ¡ˆæ•´åˆé»ç¢ºèª
Phase 1 (Month 1-2)ï¼šMVP PWAã€æ‰‹å‹•è¼¸å…¥ + åˆ°æœŸæé†’ã€50 beta users
Phase 2 (Month 3-4)ï¼šæ¢ç¢¼æƒæ + AI é£Ÿè­œã€300 users
Phase 3 (Month 5-8)ï¼šå®¶åº­å…±äº« + æ¡è³¼æ¸…å–® + CardSense æ•´åˆã€$120 MRR
Phase 4 (Month 9+)ï¼šåœ–åƒè¾¨è­˜è¼¸å…¥ã€$300 MRR
```

---

## 3. ç³»çµ±æ¶æ§‹

### 3.1 ç³»çµ±å…ƒä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FridgeManager System                     â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PWA Frontend â”‚  â”‚  Food Item    â”‚  â”‚  Recipe    â”‚  â”‚
â”‚  â”‚  (Next.js)    â”‚  â”‚  Service      â”‚  â”‚  Engine    â”‚  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚            â”‚  â”‚
â”‚  â”‚  â€¢ é£Ÿææ¸…å–®    â”‚  â”‚  â€¢ CRUD ç®¡ç†  â”‚  â”‚  â€¢ LLM æ¨è–¦â”‚  â”‚
â”‚  â”‚  â€¢ æ¢ç¢¼æƒæ    â”‚  â”‚  â€¢ åˆ°æœŸè¨ˆç®—   â”‚  â”‚  â€¢ ç‡Ÿé¤Šè¨ˆç®—â”‚  â”‚
â”‚  â”‚  â€¢ é£Ÿè­œç€è¦½    â”‚  â”‚  â€¢ åˆ†é¡ç®¡ç†   â”‚  â”‚  â€¢ é£ŸæåŒ¹é…â”‚  â”‚
â”‚  â”‚  â€¢ æ¨æ’­é€šçŸ¥    â”‚  â”‚  â€¢ æ¢ç¢¼æŸ¥è©¢   â”‚  â”‚  â€¢ ç¼ºæ–™æ¸…å–®â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  Notification â”‚  â”‚  Integration  â”‚                   â”‚
â”‚  â”‚  Service      â”‚  â”‚  Layer        â”‚                   â”‚
â”‚  â”‚               â”‚  â”‚               â”‚                   â”‚
â”‚  â”‚  â€¢ åˆ°æœŸæé†’    â”‚  â”‚  â€¢ å°æ±ºå®š API â”‚                   â”‚
â”‚  â”‚  â€¢ é£Ÿè­œå»ºè­°    â”‚  â”‚  â€¢ CardSense  â”‚                   â”‚
â”‚  â”‚  â€¢ Web Push   â”‚  â”‚  â€¢ æ¢ç¢¼ DB    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è³‡æ–™æµ

```
é£Ÿæè¼¸å…¥ï¼ˆä¸‰ç¨®æ–¹å¼ï¼‰ï¼š
  1. æ¢ç¢¼æƒæ â†’ æŸ¥ Open Food Facts API â†’ è‡ªå‹•å¡«å…¥åç¨±/é¡åˆ¥/ä¿å­˜æœŸé™
  2. æ‹ç…§è¾¨è­˜ â†’ (Phase 4) åœ–åƒè¾¨è­˜æ¨¡å‹ â†’ è‡ªå‹•è¾¨è­˜é£Ÿæ
  3. æ‰‹å‹•è¼¸å…¥ â†’ åç¨± + é¡åˆ¥ + åˆ°æœŸæ—¥

é£Ÿæé€²å…¥ç³»çµ±å¾Œï¼š
  â†’ è¨ˆç®—åˆ°æœŸå¤©æ•¸ â†’ æ’åºå±•ç¤ºï¼ˆç´…<3å¤©ã€é»ƒ3-7å¤©ã€ç¶ >7å¤©ï¼‰
    â†’ åˆ°æœŸæé†’ cronï¼šæ¯æ—¥ 08:00 æª¢æŸ¥ â†’ Web Push é€šçŸ¥
      â†’ é£Ÿè­œæ¨è–¦ï¼šLLM æ ¹æ“šç¾æœ‰é£Ÿæï¼ˆå„ªå…ˆå¿«éæœŸï¼‰æ¨è–¦é£Ÿè­œ
        â†’ ç¼ºæ–™æ¸…å–®ï¼šæ¨è–¦é£Ÿè­œéœ€è¦ä½†å†°ç®±æ²’æœ‰çš„ â†’ æ¡è³¼æ¸…å–®
          â†’ (Phase 3) CardSense æ¨è–¦è¶…å¸‚æœ€å„ªå¡
```

### 3.3 æŠ€è¡“æ£§

| å±¤ | é¸æ“‡ |
|----|------|
| å‰ç«¯ | Next.js (App Router) + PWA + Web Push API |
| UI | shadcn/ui + Tailwind |
| æ¢ç¢¼ | quagga2 (browser-based barcode scanner) |
| API | Next.js API Routes |
| è³‡æ–™åº« | PostgreSQL (Supabase) |
| LLM | GPT-5.3 (é£Ÿè­œæ¨è–¦) + åœ–åƒè¾¨è­˜æ¨¡å‹ (Phase 4, å¾…é¸) |
| å¤–éƒ¨ API | Open Food Facts (æ¢ç¢¼æŸ¥è©¢, å…è²») |
| æ¨æ’­ | Web Push API + service worker |
| éƒ¨ç½² | Vercel |

---

## 4. è³‡æ–™æ¨¡å‹

### 4.1 æ ¸å¿ƒè¡¨ï¼ˆ6 å¼µï¼‰

```sql
-- ç”¨æˆ¶
users (
  id SERIAL PRIMARY KEY,
  email VARCHAR UNIQUE,
  display_name VARCHAR,
  subscription_tier VARCHAR DEFAULT 'FREE' CHECK (subscription_tier IN ('FREE', 'PRO')),
  notification_enabled BOOLEAN DEFAULT TRUE,
  notification_time TIME DEFAULT '08:00',  -- æ¯æ—¥æé†’æ™‚é–“
  created_at TIMESTAMPTZ DEFAULT NOW()
)

-- å®¶åº­ç¾¤çµ„
households (
  id SERIAL PRIMARY KEY,
  name VARCHAR NOT NULL,           -- "æˆ‘å€‘å®¶çš„å†°ç®±"
  owner_id INTEGER REFERENCES users(id),
  invite_code VARCHAR UNIQUE,      -- 6 ç¢¼é‚€è«‹ç¢¼
  created_at TIMESTAMPTZ DEFAULT NOW()
)

-- å®¶åº­æˆå“¡
household_members (
  id SERIAL PRIMARY KEY,
  household_id INTEGER REFERENCES households(id),
  user_id INTEGER REFERENCES users(id),
  role VARCHAR DEFAULT 'member' CHECK (role IN ('owner', 'member')),
  joined_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(household_id, user_id)
)

-- é£Ÿæé …ç›®ï¼ˆæ ¸å¿ƒè¡¨ï¼‰
food_items (
  id SERIAL PRIMARY KEY,
  household_id INTEGER REFERENCES households(id),
  name VARCHAR NOT NULL,
  category VARCHAR NOT NULL CHECK (category IN (
    'vegetable', 'fruit', 'meat', 'seafood', 'dairy',
    'egg', 'grain', 'condiment', 'beverage', 'frozen', 'other'
  )),
  quantity DECIMAL(8,2),
  unit VARCHAR,                    -- "g", "ml", "å€‹", "åŒ…", "ç“¶"
  purchase_date DATE DEFAULT CURRENT_DATE,
  expiry_date DATE NOT NULL,
  barcode VARCHAR,
  storage_location VARCHAR DEFAULT 'fridge' CHECK (storage_location IN ('fridge', 'freezer', 'pantry')),
  status VARCHAR DEFAULT 'active' CHECK (status IN ('active', 'consumed', 'expired', 'discarded')),
  added_by INTEGER REFERENCES users(id),
  created_at TIMESTAMPTZ DEFAULT NOW()
)

-- é£Ÿè­œæ¨è–¦ç´€éŒ„
recipe_recommendations (
  id SERIAL PRIMARY KEY,
  household_id INTEGER REFERENCES households(id),
  used_items JSONB NOT NULL,       -- [{"item_id": 1, "name": "é›èƒ¸è‚‰"}, ...]
  recipe_name VARCHAR NOT NULL,
  recipe_content TEXT NOT NULL,    -- markdown format
  missing_items JSONB DEFAULT '[]', -- ç¼ºå°‘çš„é£Ÿæ
  was_cooked BOOLEAN DEFAULT FALSE,
  feedback_rating SMALLINT,
  created_at TIMESTAMPTZ DEFAULT NOW()
)

-- æ¡è³¼æ¸…å–®
shopping_lists (
  id SERIAL PRIMARY KEY,
  household_id INTEGER REFERENCES households(id),
  items JSONB NOT NULL,            -- [{"name": "æ´‹è”¥", "quantity": 2, "unit": "å€‹"}]
  status VARCHAR DEFAULT 'active' CHECK (status IN ('active', 'completed')),
  best_card JSONB,                 -- Phase 3: CardSense recommendation
  created_at TIMESTAMPTZ DEFAULT NOW()
)
```

### 4.2 åˆ°æœŸè¨ˆç®—é‚è¼¯

```python
from datetime import date, timedelta

def get_expiry_status(expiry_date: date) -> dict:
    days_left = (expiry_date - date.today()).days
    
    if days_left < 0:
        return {"status": "expired", "color": "black", "label": f"å·²éæœŸ {abs(days_left)} å¤©"}
    elif days_left <= 2:
        return {"status": "critical", "color": "red", "label": f"å‰© {days_left} å¤©"}
    elif days_left <= 7:
        return {"status": "warning", "color": "yellow", "label": f"å‰© {days_left} å¤©"}
    else:
        return {"status": "safe", "color": "green", "label": f"å‰© {days_left} å¤©"}

def get_default_expiry(category: str) -> int:
    """å›å‚³é è¨­ä¿å­˜å¤©æ•¸"""
    defaults = {
        "vegetable": 7, "fruit": 5, "meat": 3, "seafood": 2,
        "dairy": 14, "egg": 21, "grain": 180, "condiment": 365,
        "beverage": 30, "frozen": 90, "other": 14
    }
    return defaults.get(category, 14)
```

### 4.3 API Contracts

```python
class FoodItemCreate(BaseModel):
    name: str
    category: str
    quantity: float | None = None
    unit: str | None = None
    expiry_date: date | None = None  # None â†’ auto-calculate from category
    barcode: str | None = None
    storage_location: str = "fridge"

class FoodItemResponse(BaseModel):
    id: int
    name: str
    category: str
    quantity: float | None
    unit: str | None
    expiry_date: date
    days_left: int
    expiry_status: str             # "expired", "critical", "warning", "safe"
    storage_location: str

class RecipeRequest(BaseModel):
    household_id: int
    prioritize_expiring: bool = True  # é è¨­å„ªå…ˆä½¿ç”¨å¿«éæœŸé£Ÿæ
    servings: int = 2
    cuisine: str | None = None        # "å°å¼", "æ—¥å¼", "è¥¿å¼"

class RecipeResponse(BaseModel):
    recipe_name: str
    ingredients_used: list[str]       # å¾å†°ç®±ä½¿ç”¨çš„é£Ÿæ
    missing_ingredients: list[str]    # éœ€è¦é¡å¤–è³¼è²·çš„
    instructions: str                 # markdown
    estimated_time: int               # åˆ†é˜
    difficulty: str                   # "easy", "medium", "hard"

class ShoppingListResponse(BaseModel):
    items: list[dict]                 # [{"name", "quantity", "unit"}]
    estimated_total: int | None       # TWD
    best_card: dict | None            # Phase 3: CardSense
```

---

## 5. LLM ç­–ç•¥

### 5.1 ä½¿ç”¨é‚Šç•Œ

| å…è¨± | ç¦æ­¢ |
|------|------|
| âœ… é£Ÿè­œæ¨è–¦ï¼ˆæ ¹æ“šç¾æœ‰é£Ÿæï¼‰ | âŒ é£Ÿå“å®‰å…¨åˆ¤æ–·ï¼ˆã€ŒéæœŸ 3 å¤©çš„ç‰›å¥¶èƒ½ä¸èƒ½å–ã€ï¼‰ |
| âœ… é£Ÿæè¾¨è­˜è¼”åŠ©ï¼ˆPhase 4, åœ–åƒâ†’åç¨±ï¼‰ | âŒ ç‡Ÿé¤Š/é†«ç™‚å»ºè­°ï¼ˆéæ•ã€ç–¾ç—…é£²é£Ÿï¼‰ |
| âœ… æ¡è³¼æ¸…å–®å„ªåŒ–å»ºè­° | âŒ å–ä»£æ¢ç¢¼æŸ¥è©¢ï¼ˆç”¨ Open Food Factsï¼‰ |

### 5.2 æ¨¡å‹é¸æ“‡

| è§’è‰² | æ¨¡å‹ | æˆæœ¬ |
|------|------|------|
| é£Ÿè­œæ¨è–¦ | GPT-5.3 (via OpenClaw) | via premium subscription |
| é£Ÿæè¾¨è­˜ (Phase 4) | å¾…é¸ â€” Google Vision / local model | å¾…è©•ä¼° |
| æ¢ç¢¼æœªå‘½ä¸­æ™‚çš„åç¨±å»ºè­° | Gemini Flash | Free tier |

### 5.3 é£Ÿè­œæ¨è–¦ Prompt Template

```
You are a home cooking assistant for a Taiwan family.
Respond in Traditional Chinese.

Available ingredients (sorted by expiry, soonest first):
{available_items}

Constraints:
- Servings: {servings}
- Cuisine preference: {cuisine or "any"}
- Must use at least one item expiring within 3 days (marked ğŸ”´)
- Keep it simple: max 30 minutes, common equipment

Output JSON:
{
  "recipe_name": "...",
  "ingredients_used": ["item1", "item2"],
  "missing_ingredients": ["item3"],  // things not in fridge
  "instructions": "Step 1: ...\nStep 2: ...",
  "estimated_time": 25,
  "difficulty": "easy"
}
```

### 5.4 æˆæœ¬æ§åˆ¶

```
é£Ÿè­œæ¨è–¦å¹³å‡ ~400 tokens out
é€é GPT Plus subscription å‘¼å«ï¼Œç„¡é¡å¤– API è²»ç”¨
æ¢ç¢¼æŸ¥è©¢èµ° Open Food Facts (å…è²» API)
é£Ÿæè¾¨è­˜ Phase 4 æ‰éœ€è¦ï¼Œæˆæœ¬åˆ°æ™‚è©•ä¼°
Goal: $0 additional LLM cost on MVP
```

---

## 6. OpenClaw Agent è¨­è¨ˆ

### 6.1 FridgeManager Agentï¼ˆ1 å€‹ï¼ŒPhase 2 å•Ÿç”¨ï¼‰

```
ExpiryAlert Agent
  â”œâ”€â”€ è§¸ç™¼ï¼šæ¯æ—¥ cron 08:00ï¼ˆå°ç£æ™‚é–“ï¼‰
  â”œâ”€â”€ åŠŸèƒ½ï¼š
  â”‚   â”œâ”€â”€ æƒææ‰€æœ‰ household çš„ food_items
  â”‚   â”œâ”€â”€ æ‰¾å‡º expiry_date <= today + 3 days çš„é …ç›®
  â”‚   â”œâ”€â”€ ç‚ºæœ‰å¿«éæœŸé£Ÿæçš„å®¶åº­ç”Ÿæˆé£Ÿè­œå»ºè­°
  â”‚   â””â”€â”€ ç™¼é€ Web Push é€šçŸ¥
  â”œâ”€â”€ è¼¸å‡ºï¼š
  â”‚   â”œâ”€â”€ Push notification: "ğŸ”´ 3 é …é£Ÿæå³å°‡åˆ°æœŸï¼é»æ“ŠæŸ¥çœ‹é£Ÿè­œå»ºè­°"
  â”‚   â””â”€â”€ Discord #fridge-alertsï¼ˆé–‹ç™¼ç›£æ§ï¼‰
  â””â”€â”€ ä¾è³´ï¼šPostgreSQL + LLM (recipe) + Web Push API
```

### 6.2 è‡ªå‹•åŒ–æµç¨‹

```
ExpiryAlert æ¯æ—¥æµç¨‹ï¼š
  1. æŸ¥è©¢æ‰€æœ‰ notification_enabled = true çš„ç”¨æˆ¶
  2. æƒæå„å®¶åº­ food_items WHERE expiry_date <= NOW() + INTERVAL '3 days'
  3. åˆ†ç¾¤ï¼šexpiredï¼ˆå·²éæœŸï¼‰/ criticalï¼ˆ1-2å¤©ï¼‰/ warningï¼ˆ3å¤©ï¼‰
  4. å·²éæœŸ â†’ è‡ªå‹•æ¨™è¨˜ status = 'expired'
  5. critical + warning â†’ ç”Ÿæˆé£Ÿè­œå»ºè­°ï¼ˆLLMï¼‰
  6. æ¨é€é€šçŸ¥ï¼ˆWeb Pushï¼‰é™„é£Ÿè­œæ‘˜è¦
  7. ç´€éŒ„æ¨é€çµæœåˆ° DB
```

---

## 7. TechTrend æ•´åˆ

TechTrend æ˜¯ç¨ç«‹çš„ B2B æŠ€è¡“é€±åˆŠç”¢å“ã€‚å†°ç®±ç®¡ç†å¯å¾å…¶å…§å®¹ç”Ÿç”¢éç¨‹ä¸­ç²å–çš„é™„å¸¶æƒ…å ±ï¼š

| NB ä¾†æº | å†°ç®±ç®¡ç†è¿½è¹¤é … | å½±éŸ¿ |
|---------|--------------|------|
| NB1 AI æ¨¡å‹ | é£Ÿæè¾¨è­˜æ¨¡å‹ï¼ˆGoogle Vision ç­‰ï¼‰ã€é£Ÿè­œ AI | Phase 4 åœ–åƒè¾¨è­˜åŠŸèƒ½ |
| NB2 æ¡†æ¶ | Next.js PWA æ›´æ–°ã€Web Push API è¦ç¯„ | æ¨æ’­ç©©å®šæ€§å’Œé›¢ç·šèƒ½åŠ› |
| NB3 DevOps | Vercel Edge Functions | æ¨æ’­å»¶é²å’Œ cron å¯é æ€§ |
| NB4 å•†æ¥­ | è¨‚é–±æ¨¡å¼æ¡ˆä¾‹ã€é£Ÿå“é›»å•†ç”Ÿæ…‹ | å®šåƒ¹å’Œè¯ç›Ÿè¡ŒéŠ·ç­–ç•¥ |

---

## 8. è·¨å°ˆæ¡ˆæ•´åˆé»

| å°ˆæ¡ˆ | æ•´åˆæ–¹å¼ | éšæ®µ | åƒ¹å€¼ |
|------|---------|------|------|
| å°æ±ºå®š | é£Ÿæå¿«éæœŸ â†’ è§¸ç™¼ã€Œä»Šå¤©ç…®ä»€éº¼ã€æ¨è–¦ | Phase 2 | ğŸŸ¡ ä¸­ |
| CardSense | æ¡è³¼æ¸…å–® â†’ æ¨è–¦è¶…å¸‚å›é¥‹æœ€é«˜çš„ä¿¡ç”¨å¡ | Phase 3 | ğŸŸ¡ ä¸­ |
| RTA | è¶…å¸‚/é‡è²©åº—è©•è«–åˆ†æï¼ˆé–“æ¥ï¼Œä½å„ªå…ˆï¼‰ | Phase 4 | ğŸŸ¢ ä½ |

### æ•´åˆè§¸ç™¼é‚è¼¯

```python
# å†°ç®±ç®¡ç† â†’ å°æ±ºå®š æ•´åˆ
def check_expiring_trigger(household_id: int):
    expiring = get_items_expiring_within(household_id, days=2)
    if len(expiring) >= 3:
        # è§¸ç™¼å°æ±ºå®šçš„ã€Œä»Šå¤©ç…®ä»€éº¼ã€å ´æ™¯
        smartchoice_api.trigger_recommendation(
            scenario="cook_at_home",
            available_ingredients=[item.name for item in expiring],
            household_id=household_id
        )

# å†°ç®±ç®¡ç† â†’ CardSense æ•´åˆ
def generate_shopping_recommendation(shopping_list_id: int):
    items = get_shopping_list(shopping_list_id)
    estimated_total = estimate_cost(items)
    
    # CardSense æ¨è–¦æœ€å„ªè¶…å¸‚å¡
    card = cardsense_api.recommend(
        category="supermarket",
        amount=estimated_total
    )
    # â†’ {"card_name": "è¯é‚¦è³´é»å¡", "cashback": "5%", "amount_saved": 45}
    
    update_shopping_list(shopping_list_id, best_card=card)
```

---

## 9. ç‰ˆæ¬Šèˆ‡æ³•å¾‹é¢¨éšª

### 9.1 é¢¨éšªçŸ©é™£

**ğŸŸ¡ MEDIUMï¼šé£Ÿå“å®‰å…¨è³‡è¨Šè²¬ä»»**
- Mitigationï¼šä¸æä¾›é£Ÿå“å®‰å…¨åˆ¤æ–·ï¼ˆã€ŒéæœŸèƒ½ä¸èƒ½åƒã€ç”±ç”¨æˆ¶è‡ªè¡Œæ±ºå®šï¼‰ï¼›åˆ°æœŸæ—¥åƒ…ç‚ºæé†’ã€éå®‰å…¨ä¿è­‰ï¼›å…è²¬è²æ˜

**ğŸŸ¡ MEDIUMï¼šOpen Food Facts è³‡æ–™æº–ç¢ºåº¦**
- Mitigationï¼šæ¢ç¢¼æŸ¥è©¢çµæœå…è¨±ç”¨æˆ¶ä¿®æ”¹ï¼›æ¨™è¨˜ã€Œè‡ªå‹•å¡«å…¥ï¼Œè«‹ç¢ºèªã€ï¼›éŒ¯èª¤è³‡æ–™å›å ±æ©Ÿåˆ¶

**ğŸŸ¢ LOWï¼šé£Ÿè­œæ¨è–¦æº–ç¢ºåº¦**
- Mitigationï¼šLLM é£Ÿè­œæ¨™è¨˜ã€ŒAI ç”Ÿæˆã€ï¼›å…è¨±å›å ±ä¸ä½³é£Ÿè­œï¼›ä¸æ¶‰åŠéæ•æˆ–ç‰¹æ®Šé£²é£Ÿå»ºè­°

**ğŸŸ¢ LOWï¼šç”¨æˆ¶è³‡æ–™éš±ç§**
- Mitigationï¼šé£Ÿæè³‡æ–™ä¸å«æ•æ„Ÿå€‹äººè³‡è¨Šï¼›å®¶åº­å…±äº«éœ€é‚€è«‹ç¢¼ï¼›å¯åˆªé™¤æ‰€æœ‰è³‡æ–™

### 9.2 å¿…è¦å…è²¬è²æ˜

```
å†°ç®±ç®¡ç†æä¾›é£Ÿæè¿½è¹¤å’Œ AI é£Ÿè­œå»ºè­°ï¼Œåƒ…ä¾›åƒè€ƒã€‚
é£Ÿæåˆ°æœŸæ—¥ç‚ºé ä¼°å€¼ï¼Œå¯¦éš›ä¿å­˜ç‹€æ…‹è«‹è‡ªè¡Œåˆ¤æ–·ã€‚
å¦‚æœ‰é£Ÿç‰©éæ•æˆ–ç‰¹æ®Šé£²é£Ÿéœ€æ±‚ï¼Œè«‹è«®è©¢å°ˆæ¥­ç‡Ÿé¤Šå¸«ã€‚
```

### 9.3 åˆè¦ TODO

- [ ] Open Food Facts API ä½¿ç”¨æ¢æ¬¾ç¢ºèª
- [ ] é£Ÿå“å®‰å…¨å…è²¬è²æ˜æ³•å¾‹å¯©æŸ¥
- [ ] ç”¨æˆ¶è³‡æ–™åˆªé™¤å·¥ä½œæµ
- [ ] éæ•è­¦ç¤ºåŠŸèƒ½ï¼ˆPhase 3 â€” æ¨™è¨˜ç”¨æˆ¶éæ•åŸã€é£Ÿè­œè‡ªå‹•æ’é™¤ï¼‰

---

## 10. æˆåŠŸæ¨™æº–èˆ‡é€€å‡ºæ¢ä»¶

| éšæ®µ | æˆåŠŸæ¨™æº– | é€€å‡ºæ¢ä»¶ |
|------|---------|---------|
| Phase 1 | 50 beta users, å¹³å‡è¿½è¹¤ 10+ é …é£Ÿæ | 2 å€‹æœˆï¼Œ< 10 weekly active |
| Phase 2 | 300 weekly active, 30 Pro subscribers | 4 å€‹æœˆï¼Œ< 5% conversion |
| Phase 3 | $120 MRR, å®¶åº­å…±äº« 50+ households | 6 å€‹æœˆï¼Œ< $50 MRR |
| Phase 4 | $300 MRR, åœ–åƒè¾¨è­˜ MVP | é€£çºŒ 3 å€‹æœˆä¸‹æ»‘ |

**æ¯é€±æ™‚é–“æŠ•å…¥ï¼š** 2-3 hr/weekï¼ˆè¦åŠƒä¸­ï¼‰ï¼Œé€²å…¥é–‹ç™¼å¾Œæå‡åˆ° 4-6 hr/week

---

## 11. ä¸‹ä¸€æ­¥è¡Œå‹•ï¼ˆSprint 1ï¼‰

**Sprint 1 ç›®æ¨™ï¼š** Working PWA + æ‰‹å‹•é£Ÿæç®¡ç† + åˆ°æœŸæé†’

### Week 1-2ï¼šåŸºç¤å»ºè¨­
- Next.js project scaffold + PWA manifest + service worker
- Supabase DB schema å»ºç«‹
- ç”¨æˆ¶è¨»å†Š/ç™»å…¥ + å®¶åº­ç¾¤çµ„å»ºç«‹
- é£Ÿæ CRUD UIï¼ˆæ‰‹å‹•è¼¸å…¥è¡¨å–®ï¼‰

### Week 3-4ï¼šæ ¸å¿ƒåŠŸèƒ½
- é£Ÿææ¸…å–®é é¢ï¼ˆåˆ°æœŸæ’åºã€ç´…é»ƒç¶ æ¨™è¨˜ï¼‰
- åˆ°æœŸæé†’ cron jobï¼ˆæ¯æ—¥ 08:00ï¼‰
- Web Push notification å¯¦ä½œ
- é£Ÿæé¡åˆ¥é è¨­åˆ°æœŸå¤©æ•¸

### Week 5-6ï¼šAI é£Ÿè­œ + Beta
- LLM é£Ÿè­œæ¨è–¦ APIï¼š`POST /api/recipe`
- é£Ÿè­œå±•ç¤º UIï¼ˆé£ŸæåŒ¹é…é«˜äº® + ç¼ºæ–™æç¤ºï¼‰
- æ¢ç¢¼æƒææ•´åˆï¼ˆquagga2 + Open Food Factsï¼‰
- 10 ä½ beta users æ¸¬è©¦

### Sprint 1 äº¤ä»˜ç‰©

```
âœ… PWA with food item CRUD
âœ… Expiry tracking with color-coded alerts
âœ… Daily push notification for expiring items
âœ… AI recipe recommendation (prioritizing expiring items)
âœ… Barcode scanning (basic)
âœ… 10 beta users providing feedback
```

---

*Owner: Alan | Created: 2026-02-25 | Status: æ¦‚å¿µå®Œæˆï¼Œå¾…é€²å…¥ Sprint 1*
